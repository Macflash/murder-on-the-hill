(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],{10:function(t,e,o){t.exports=o(17)},15:function(t,e,o){},16:function(t,e,o){},17:function(t,e,o){"use strict";o.r(e);var n=o(0),i=o.n(n),r=o(9),a=o.n(r),c=(o(15),o(6)),l=(o(16),o(7));function s(t,e){var o=t.x,n=t.y;switch(e){case"TOP":return{x:o,y:n-1};case"BOTTOM":return{x:o,y:n+1};case"RIGHT":return{x:o+1,y:n};case"LEFT":return{x:o-1,y:n}}}var u=o(1);var y=[];function h(t){y.push(t)}function d(){return y}function f(t){var e=t.item,o=.5*e.width,i=.5*e.height;return n.createElement("div",{title:e.name,style:{position:"absolute",zIndex:t.zIndex||50,height:e.height,width:e.width,backgroundColor:e.color||"grey",top:e.position.y-W+.5*window.innerHeight-i,left:e.position.x-S+.5*window.innerWidth-o}})}h({position:{x:600*Math.random()-300,y:400*Math.random()-200},height:15,width:20,color:"green",name:"purse",mass:4,velocity:{x:0,y:0}}),h({position:{x:200*Math.random()-100,y:400*Math.random()-200},height:20,width:20,color:"brown",name:"Box",mass:15,velocity:{x:0,y:0}}),h({position:{x:200*Math.random()-100,y:800*Math.random()-400},height:10,width:10,color:"gold",name:"pocketwatch",mass:.5,velocity:{x:0,y:0}}),h({position:{x:200*Math.random()-100,y:800*Math.random()-400},height:70,width:40,color:"tan",name:"Table",mass:70,velocity:{x:0,y:0}});function v(t){return{x:Math.floor((t.x+150)/300),y:Math.floor((t.y+150)/300)}}var m=10,w=75,T=Math.max(window.innerWidth,window.innerHeight),x=Math.ceil(T/600);window.addEventListener("resize",(function(){T=Math.max(window.innerWidth,window.innerHeight),x=Math.ceil(T/600),console.log("Updated view dist",x)})),console.log("Initial view dist",x);var p=function(t){var e,o,n=t.tile,r=t.floor,a=t.overlayMode,c={x:n.x,y:n.y},l=v({x:S,y:W});return e=c,o=l,Math.max(Math.abs(e.x-o.x),Math.abs(e.y-o.y))>x?null:i.a.createElement("div",{style:{zIndex:a?10:4,position:"absolute",height:300,width:300,top:300*n.y+.5*(window.innerHeight-300)-W,left:300*n.x+.5*(window.innerWidth-300)-S,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:a?void 0:"#663333"}},n.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(t){return i.a.createElement(g,{overlayMode:a,tile:n,floor:r,direction:t,hasDoor:n.doors.has(t),opened:n.hasNeighbor(r,t)})})))};function k(t,e){var o=0,n=0,i=0,r=0,a=e,c=e;switch(t){case"TOP":n="auto",a=void 0;break;case"BOTTOM":o="auto",a=void 0;break;case"RIGHT":i="auto",c=void 0;break;case"LEFT":r="auto",c=void 0}return{top:o,bottom:n,left:i,right:r,width:a,height:c}}var g=function(t){var e=t.direction,o=t.opened,n=t.hasDoor,r=t.tile,a=t.floor,c=t.overlayMode,u="TOP"==e||"BOTTOM"==e,y=i.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:u?"100%":void 0,width:u?void 0:"100%"}});return i.a.createElement("div",{style:Object(l.a)(Object(l.a)({},k(e,c?3:m)),{},{position:"absolute",display:"flex",flexDirection:u?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},y,n?i.a.createElement("div",{style:{cursor:o?void 0:"pointer",height:w,width:w,backgroundColor:o?"":"grey"},onClick:o?void 0:function(){a.fillCoord(s(r.coord,e)),z()}}):null,y)},O=o(4),b=o(5),M=function(){function t(e){Object(O.a)(this,t),this.info=e,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0;var o=e.doors;this.initialDoors=new Set(o)}return Object(b.a)(t,[{key:"canPlace",value:function(t,e){var o=this,n=!0;return t.forEach((function(t){o.doors.has(t)||(n=!1)})),e.forEach((function(t){o.doors.has(t)&&(n=!1)})),n}},{key:"copy",value:function(e){var o=new t(this.info);return e?o.rotate(e):o.rotate(this.rotation),o}},{key:"rotate",value:function(t){return this.rotation=t%4,this}},{key:"hasNeighbor",value:function(t,e){return t.hasCoord(s(this.coord,e))}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var t=this,e=new Set;return this.initialDoors.forEach((function(o){e.add(function(t,e){var o=["TOP","RIGHT","BOTTOM","LEFT"],n=o.indexOf(t);return o[(n+e)%o.length]}(o,t.rotation))})),e}}]),t}(),E=new M({name:"Fourway",doors:["TOP","LEFT","RIGHT","BOTTOM"]}),C=new M({name:"TeeWay",doors:["TOP","LEFT","RIGHT"]}),I=new M({name:"Straight",doors:["TOP","BOTTOM"]}),j=new M({name:"LTurn",doors:["TOP","RIGHT"]}),L=new M({name:"RTurn",doors:["TOP","LEFT"]}),P=new M({name:"DeadEnd",doors:["TOP"]});function F(t){return[t,t.copy(1),t.copy(2),t.copy(3)]}function H(t){return[t,t.copy(1)]}var R=[].concat(Object(u.a)(H(E)),Object(u.a)(H(I)),Object(u.a)(F(C)),Object(u.a)(F(j)),Object(u.a)(F(L)),Object(u.a)(F(P)));function B(t,e){return"".concat(t,", ").concat(e)}var A=new(function(){function t(e){Object(O.a)(this,t),this.name=e,this.grid=new Map}return Object(b.a)(t,[{key:"getCoord",value:function(t){return this.getTile(t.x,t.y)}},{key:"getTile",value:function(t,e){return this.grid.get(B(t,e))}},{key:"hasCoord",value:function(t){return this.hasTile(t.x,t.y)}},{key:"hasTile",value:function(t,e){return this.grid.has(B(t,e))}},{key:"setCoord",value:function(t,e){this.setTile(t,e.x,e.y)}},{key:"setTile",value:function(t,e,o){if(this.hasTile(e,o))throw alert("Already had a tile there!"),"already had a tile!";t.x=e,t.y=o,this.grid.set(B(e,o),t)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(t){this.fillTile(t.x,t.y)}},{key:"fillTile",value:function(t,e){var o=this,n=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(n){return o.getCoord(s({x:t,y:e},n))})),new Set),i=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=o.getCoord(s({x:t,y:e},r));a&&(a.doors.has(function(t){switch(t){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?n.add(r):i.add(r))}));var r=R.filter((function(t){return t.canPlace(n,i)}));if(!r)throw"wow we should really fix that!";var a=r[Math.floor(Math.random()*r.length)].copy();this.setTile(a,t,e)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(t){var e=Object(c.a)(t,2);e[0];return e[1]}))}}]),t}())("Main Floor");A.setTile(E.copy(),0,0);var G={position:{x:0,y:0},height:30,width:15,color:"red",name:"You",velocity:{x:0,y:0},mass:140};function D(){return i.a.createElement(f,{item:G,zIndex:51})}var S=0,W=0,z=function(){},N=!1;var U=!1,J=!1,q=!1,V=!1,Y=!1;document.addEventListener("keydown",(function(t){"m"!=t.key&&"M"!=t.key||(Y||(N=!N),Y=!0),"a"!=t.key&&"A"!=t.key&&"ArrowLeft"!=t.key||(U=!0,q=!1),"d"!=t.key&&"D"!=t.key&&"ArrowRight"!=t.key||(q=!0,U=!1),"w"!=t.key&&"W"!=t.key&&"ArrowUp"!=t.key||(J=!0,V=!1),"s"!=t.key&&"S"!=t.key&&"ArrowDown"!=t.key||(V=!0,J=!1)})),document.addEventListener("keyup",(function(t){"a"!=t.key&&"A"!=t.key&&"ArrowLeft"!=t.key||(U=!1),"d"!=t.key&&"D"!=t.key&&"ArrowRight"!=t.key||(q=!1),"w"!=t.key&&"W"!=t.key&&"ArrowUp"!=t.key||(J=!1),"s"!=t.key&&"S"!=t.key&&"ArrowDown"!=t.key||(V=!1),"m"!=t.key&&"M"!=t.key||(Y=!1)}));!function t(){var e;N?(U&&(S-=7),q&&(S+=7),J&&(W-=7),V&&(W+=7)):(G.velocity=G.velocity||{x:0,y:0},U&&G.velocity.x>-2&&(G.velocity.x-=.3),q&&G.velocity.x<2&&(G.velocity.x+=.3),J&&G.velocity.y>-2&&(G.velocity.y-=.3),V&&G.velocity.y<2&&(G.velocity.y+=.3)),e=[G],[].concat(Object(u.a)(e),Object(u.a)(d())).forEach((function(t,e){t.velocity.x&&(t.position.x+=t.velocity.x),t.velocity.y&&(t.position.y+=t.velocity.y)})),function(t,e){var o=.5*t.width,n=.5*t.height,i=.5*w,r=i-o,a=i-n,c=v(t.position),l=function(t,e){return{x:t.position.x-300*e.x,y:t.position.y-300*e.y}}(t,c),u=l.x,y=l.y,h=o+m-150,d=-1*h,f=n+m-150,T=-1*f,x=null===e||void 0===e?void 0:e.getCoord(c);function p(t,o){if(!(x&&x.doors.has(o)))return!1;var n=s(t,o);return(null===e||void 0===e?void 0:e.hasCoord(n))||null===e||void 0===e||e.fillCoord(n),!0}if(u<=h&&(Math.abs(y)>a||!p(c,"LEFT"))){if(Math.abs(y)<a+3)return y>0?t.position.y+=a-y:t.position.y-=a+y,void(t.velocity.y=0);t.position.x+=h-u,t.velocity.x=0}if(u>=d&&(Math.abs(y)>a||!p(c,"RIGHT"))){if(Math.abs(y)<a+3)return y>0?t.position.y+=a-y:t.position.y-=a+y,void(t.velocity.y=0);t.position.x+=d-u,t.velocity.x=0}if(y<=f&&(Math.abs(u)>r||!p(c,"TOP"))){if(Math.abs(u)<r+3)return u>0?t.position.x+=r-u:t.position.x-=r+u,void(t.velocity.x=0);t.position.y+=f-y,t.velocity.y=0}if(y>=T&&(Math.abs(u)>r||!p(c,"BOTTOM"))){if(Math.abs(u)<r+3)return u>0?t.position.x+=r-u:t.position.x-=r+u,void(t.velocity.x=0);t.position.y+=T-y,t.velocity.y=0}}(G,A),function(t){[].concat(Object(u.a)(t),Object(u.a)(d())).forEach((function(t){t.velocity&&(t.velocity.x&&(t.velocity.x*=.9,Math.abs(t.velocity.x)<.1&&(t.velocity.x=0)),t.velocity.y&&(t.velocity.y*=.9,Math.abs(t.velocity.y)<.1&&(t.velocity.y=0)))}))}([G]),N||(S=G.position.x,W=G.position.y),z(),requestAnimationFrame((function(){return t()}))}();var $=function(){var t=i.a.useState(0),e=Object(c.a)(t,2)[1],o=i.a.useCallback((function(){e(Math.random())}),[e]);return i.a.useEffect((function(){z=o}),[o]),i.a.createElement("div",{className:"App",style:{overflow:"hidden"}},N?i.a.createElement("div",{style:{zIndex:100,bottom:0,padding:20,position:"absolute",left:0,right:0}},i.a.createElement("div",{style:{color:"white"}},"Map"),i.a.createElement("button",{onClick:function(){W-=100,o()}},"UP!"),i.a.createElement("button",{onClick:function(){W+=100,o()}},"DOWN!"),i.a.createElement("button",{onClick:function(){S-=100,o()}},"LEFT!"),i.a.createElement("button",{onClick:function(){S+=100,o()}},"RIGHT!"),i.a.createElement("button",{onClick:function(){S=0,W=0,o()}},"CENTER!")):null,i.a.createElement(D,null),i.a.createElement("div",null,null,i.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},A.tiles.map((function(t){return i.a.createElement(p,{overlayMode:N,floor:A,tile:t,key:B(t.x,t.y)})})),d().map((function(t){return i.a.createElement(f,{item:t})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.c4a70c5e.chunk.js.map