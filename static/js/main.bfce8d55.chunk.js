(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(9),a=n.n(r),c=(n(15),n(6)),l=(n(16),n(7));function u(e,t){var n=e.x,o=e.y;switch(t){case"TOP":return{x:n,y:o-1};case"BOTTOM":return{x:n,y:o+1};case"RIGHT":return{x:n+1,y:o};case"LEFT":return{x:n-1,y:o}}}function h(e){return{x:Math.floor((e.x+150)/300),y:Math.floor((e.y+150)/300)}}var d=10,s=48,y=Math.max(window.innerWidth,window.innerHeight),f=Math.ceil(y/600);window.addEventListener("resize",(function(){y=Math.max(window.innerWidth,window.innerHeight),f=Math.ceil(y/600),console.log("Updated view dist",f)})),console.log("Initial view dist",f);var w=function(e){var t,n,o=e.tile,r=e.floor,a=e.overlayMode,c={x:o.x,y:o.y},l=h({x:z,y:N});return t=c,n=l,Math.max(Math.abs(t.x-n.x),Math.abs(t.y-n.y))>f?null:i.a.createElement("div",{style:{zIndex:a?10:4,position:"absolute",height:300,width:300,top:300*o.y+.5*(window.innerHeight-300)-N,left:300*o.x+.5*(window.innerWidth-300)-z,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:a?void 0:"#663333"}},o.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(e){return i.a.createElement(T,{overlayMode:a,tile:o,floor:r,direction:e,hasDoor:o.doors.has(e),opened:o.hasNeighbor(r,e)})})))};function v(e,t){var n=0,o=0,i=0,r=0,a=t,c=t;switch(e){case"TOP":o="auto",a=void 0;break;case"BOTTOM":n="auto",a=void 0;break;case"RIGHT":i="auto",c=void 0;break;case"LEFT":r="auto",c=void 0}return{top:n,bottom:o,left:i,right:r,width:a,height:c}}var T=function(e){var t=e.direction,n=e.opened,o=e.hasDoor,r=e.tile,a=e.floor,c=e.overlayMode,h="TOP"==t||"BOTTOM"==t,y=i.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:h?"100%":void 0,width:h?void 0:"100%"}});return i.a.createElement("div",{style:Object(l.a)(Object(l.a)({},v(t,c?3:d)),{},{position:"absolute",display:"flex",flexDirection:h?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},y,o?i.a.createElement("div",{style:{cursor:n?void 0:"pointer",height:s,width:s,backgroundColor:n?"":"grey"},onClick:n?void 0:function(){a.fillCoord(u(r.coord,t)),U()}}):null,y)},m=n(4),g=n(5),k=n(1),p=function(){function e(t){Object(m.a)(this,e),this.info=t,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0;var n=t.doors;this.initialDoors=new Set(n)}return Object(g.a)(e,[{key:"canPlace",value:function(e,t){var n=this,o=!0;return e.forEach((function(e){n.doors.has(e)||(o=!1)})),t.forEach((function(e){n.doors.has(e)&&(o=!1)})),o}},{key:"copy",value:function(t){var n=new e(this.info);return t?n.rotate(t):n.rotate(this.rotation),n}},{key:"rotate",value:function(e){return this.rotation=e%4,this}},{key:"hasNeighbor",value:function(e,t){return e.hasCoord(u(this.coord,t))}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var e=this,t=new Set;return this.initialDoors.forEach((function(n){t.add(function(e,t){var n=["TOP","RIGHT","BOTTOM","LEFT"],o=n.indexOf(e);return n[(o+t)%n.length]}(n,e.rotation))})),t}}]),e}(),x=new p({name:"Fourway",doors:["TOP","LEFT","RIGHT","BOTTOM"]}),O=new p({name:"TeeWay",doors:["TOP","LEFT","RIGHT"]}),E=new p({name:"Straight",doors:["TOP","BOTTOM"]}),b=new p({name:"LTurn",doors:["TOP","RIGHT"]}),M=new p({name:"RTurn",doors:["TOP","LEFT"]}),C=new p({name:"DeadEnd",doors:["TOP"]});function I(e){return[e,e.copy(1),e.copy(2),e.copy(3)]}function P(e){return[e,e.copy(1)]}var L=[].concat(Object(k.a)(P(x)),Object(k.a)(P(E)),Object(k.a)(I(O)),Object(k.a)(I(b)),Object(k.a)(I(M)),Object(k.a)(I(C)));function H(e,t){return"".concat(e,", ").concat(t)}var R=new(function(){function e(t){Object(m.a)(this,e),this.name=t,this.grid=new Map}return Object(g.a)(e,[{key:"getCoord",value:function(e){return this.getTile(e.x,e.y)}},{key:"getTile",value:function(e,t){return this.grid.get(H(e,t))}},{key:"hasCoord",value:function(e){return this.hasTile(e.x,e.y)}},{key:"hasTile",value:function(e,t){return this.grid.has(H(e,t))}},{key:"setCoord",value:function(e,t){this.setTile(e,t.x,t.y)}},{key:"setTile",value:function(e,t,n){if(this.hasTile(t,n))throw alert("Already had a tile there!"),"already had a tile!";e.x=t,e.y=n,this.grid.set(H(t,n),e)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(e){this.fillTile(e.x,e.y)}},{key:"fillTile",value:function(e,t){var n=this,o=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(o){return n.getCoord(u({x:e,y:t},o))})),new Set),i=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=n.getCoord(u({x:e,y:t},r));a&&(a.doors.has(function(e){switch(e){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?o.add(r):i.add(r))}));var r=L.filter((function(e){return e.canPlace(o,i)}));if(!r)throw"wow we should really fix that!";var a=r[Math.floor(Math.random()*r.length)].copy();this.setTile(a,e,t)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(e){var t=Object(c.a)(e,2);t[0];return t[1]}))}}]),e}())("Main Floor");R.setTile(x.copy(),0,0);var B,F;function j(){if(!F){if(!(B=document.getElementById("fog")))return;if(B.width=window.innerWidth,B.height=window.innerHeight,!(F=B.getContext("2d")))return}F.clearRect(0,0,B.width,B.height),F.fillStyle="rgba(0,0,0,1)",F.fillRect(0,0,B.width,B.height),F.fillStyle="rgba(255,255,255,1)",F.beginPath(),F.arc(B.width/2,B.height/2,300,0,2*Math.PI),F.fill(),F.closePath()}window.addEventListener("resize",(function(){B.width=window.innerWidth,B.height=window.innerHeight,j()}));var A=[];function G(e){A.push(e)}function D(e){var t=e.item,n=.5*t.width,i=.5*t.height;return o.createElement("div",{title:t.name,style:{position:"absolute",zIndex:e.zIndex||50,height:t.height,width:t.width,backgroundColor:t.color||"grey",top:t.position.y-N+.5*window.innerHeight-i,left:t.position.x-z+.5*window.innerWidth-n}})}G({position:{x:600*Math.random()-300,y:400*Math.random()-200},height:15,width:20,color:"green",name:"purse"}),G({position:{x:200*Math.random()-100,y:400*Math.random()-200},height:20,width:20,color:"brown",name:"Box"}),G({position:{x:200*Math.random()-100,y:800*Math.random()-400},height:10,width:10,color:"gold",name:"pocketwatch"});var S={position:{x:0,y:0},height:30,width:15,color:"red",name:"You"};function W(){return i.a.createElement(D,{item:S,zIndex:51})}var z=0,N=0,U=function(){},J=!1;var q=!1,V=!1,Y=!1,$=!1,K=!1;document.addEventListener("keydown",(function(e){"m"!=e.key&&"M"!=e.key||(K||(J=!J),K=!0),"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(q=!0,Y=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(Y=!0,q=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(V=!0,$=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||($=!0,V=!1)})),document.addEventListener("keyup",(function(e){"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(q=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(Y=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(V=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||($=!1),"m"!=e.key&&"M"!=e.key||(K=!1)}));!function e(){J?(q&&(z-=7),Y&&(z+=7),V&&(N-=7),$&&(N+=7)):(q&&(S.position.x-=2),Y&&(S.position.x+=2),V&&(S.position.y-=2),$&&(S.position.y+=2)),function(e,t){var n=.5*e.width,o=.5*e.height,i=.5*s,r=h(e.position),a=function(e,t){return{x:e.position.x-300*t.x,y:e.position.y-300*t.y}}(e,r),c=a.x,l=a.y,y=n+d-150,f=-1*y,w=o+d-150,v=-1*w,T=null===t||void 0===t?void 0:t.getCoord(r);function m(e,n){if(!(T&&T.doors.has(n)))return!1;var o=u(e,n);return(null===t||void 0===t?void 0:t.hasCoord(o))||null===t||void 0===t||t.fillCoord(o),!0}c<=y&&(Math.abs(l)>i||!m(r,"LEFT"))&&(e.position.x+=y-c),c>=f&&(Math.abs(l)>i||!m(r,"RIGHT"))&&(e.position.x+=f-c),l<=w&&(Math.abs(c)>i||!m(r,"TOP"))&&(e.position.y+=w-l),l>=v&&(Math.abs(c)>i||!m(r,"BOTTOM"))&&(e.position.y+=v-l)}(S,R),J||(z=S.position.x,N=S.position.y),j(),U(),requestAnimationFrame((function(){return e()}))}();var Q=function(){var e=i.a.useState(0),t=Object(c.a)(e,2)[1],n=i.a.useCallback((function(){t(Math.random())}),[t]);return i.a.useEffect((function(){U=n}),[n]),i.a.createElement("div",{className:"App",style:{overflow:"hidden"}},J?i.a.createElement("div",{style:{zIndex:100,bottom:0,padding:20,position:"absolute",left:0,right:0}},i.a.createElement("div",{style:{color:"white"}},"Map"),i.a.createElement("button",{onClick:function(){N-=100,n()}},"UP!"),i.a.createElement("button",{onClick:function(){N+=100,n()}},"DOWN!"),i.a.createElement("button",{onClick:function(){z-=100,n()}},"LEFT!"),i.a.createElement("button",{onClick:function(){z+=100,n()}},"RIGHT!"),i.a.createElement("button",{onClick:function(){z=0,N=0,n()}},"CENTER!")):null,i.a.createElement(W,null),i.a.createElement("div",null,null,i.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},R.tiles.map((function(e){return i.a.createElement(w,{overlayMode:J,floor:R,tile:e,key:H(e.x,e.y)})})),A.map((function(e){return i.a.createElement(D,{item:e})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.bfce8d55.chunk.js.map