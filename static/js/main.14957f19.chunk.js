(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],{10:function(e,t,o){e.exports=o(17)},15:function(e,t,o){},16:function(e,t,o){},17:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=o(9),a=o.n(r),c=(o(15),o(6)),l=(o(16),o(7));function s(e,t){var o=e.x,n=e.y;switch(t){case"TOP":return{x:o,y:n-1};case"BOTTOM":return{x:o,y:n+1};case"RIGHT":return{x:o+1,y:n};case"LEFT":return{x:o-1,y:n}}}var u=o(1);var y=[];function d(){return y}function h(e){var t=e.item,o=.5*t.width,i=.5*t.height;return n.createElement("div",{title:t.name,style:{position:"absolute",zIndex:e.zIndex||50,height:t.height,width:t.width,backgroundColor:t.color||"grey",top:t.position.y-S+.5*window.innerHeight-i,left:t.position.x-D+.5*window.innerWidth-o}})}function f(e){return{x:Math.floor((e.x+150)/300),y:Math.floor((e.y+150)/300)}}var v=10,T=75,w=Math.max(window.innerWidth,window.innerHeight),m=Math.ceil(w/600);window.addEventListener("resize",(function(){w=Math.max(window.innerWidth,window.innerHeight),m=Math.ceil(w/600),console.log("Updated view dist",m)})),console.log("Initial view dist",m);var x=function(e){var t,o,n=e.tile,r=e.floor,a=e.overlayMode,c={x:n.x,y:n.y},l=f({x:D,y:S});return t=c,o=l,Math.max(Math.abs(t.x-o.x),Math.abs(t.y-o.y))>m?null:i.a.createElement("div",{style:{zIndex:a?10:4,position:"absolute",height:300,width:300,top:300*n.y+.5*(window.innerHeight-300)-S,left:300*n.x+.5*(window.innerWidth-300)-D,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:a?void 0:"#663333"}},n.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(e){return i.a.createElement(p,{overlayMode:a,tile:n,floor:r,direction:e,hasDoor:n.doors.has(e),opened:n.hasNeighbor(r,e)})})))};function k(e,t){var o=0,n=0,i=0,r=0,a=t,c=t;switch(e){case"TOP":n="auto",a=void 0;break;case"BOTTOM":o="auto",a=void 0;break;case"RIGHT":i="auto",c=void 0;break;case"LEFT":r="auto",c=void 0}return{top:o,bottom:n,left:i,right:r,width:a,height:c}}var p=function(e){var t=e.direction,o=e.opened,n=e.hasDoor,r=e.tile,a=e.floor,c=e.overlayMode,u="TOP"==t||"BOTTOM"==t,y=i.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:u?"100%":void 0,width:u?void 0:"100%"}});return i.a.createElement("div",{style:Object(l.a)(Object(l.a)({},k(t,c?3:v)),{},{position:"absolute",display:"flex",flexDirection:u?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},y,n?i.a.createElement("div",{style:{cursor:o?void 0:"pointer",height:T,width:T,backgroundColor:o?"":"grey"},onClick:o?void 0:function(){a.fillCoord(s(r.coord,t)),W()}}):null,y)},O=o(4),g=o(5),b=function(){function e(t){Object(O.a)(this,e),this.info=t,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0;var o=t.doors;this.initialDoors=new Set(o)}return Object(g.a)(e,[{key:"canPlace",value:function(e,t){var o=this,n=!0;return e.forEach((function(e){o.doors.has(e)||(n=!1)})),t.forEach((function(e){o.doors.has(e)&&(n=!1)})),n}},{key:"copy",value:function(t){var o=new e(this.info);return t?o.rotate(t):o.rotate(this.rotation),o}},{key:"rotate",value:function(e){return this.rotation=e%4,this}},{key:"hasNeighbor",value:function(e,t){return e.hasCoord(s(this.coord,t))}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var e=this,t=new Set;return this.initialDoors.forEach((function(o){t.add(function(e,t){var o=["TOP","RIGHT","BOTTOM","LEFT"],n=o.indexOf(e);return o[(n+t)%o.length]}(o,e.rotation))})),t}}]),e}(),E=new b({name:"Fourway",doors:["TOP","LEFT","RIGHT","BOTTOM"]}),M=new b({name:"TeeWay",doors:["TOP","LEFT","RIGHT"]}),C=new b({name:"Straight",doors:["TOP","BOTTOM"]}),I=new b({name:"LTurn",doors:["TOP","RIGHT"]}),j=new b({name:"RTurn",doors:["TOP","LEFT"]}),L=new b({name:"DeadEnd",doors:["TOP"]});function P(e){return[e,e.copy(1),e.copy(2),e.copy(3)]}function F(e){return[e,e.copy(1)]}var H=[].concat(Object(u.a)(F(E)),Object(u.a)(F(C)),Object(u.a)(P(M)),Object(u.a)(P(I)),Object(u.a)(P(j)),Object(u.a)(P(L)));function R(e,t){return"".concat(e,", ").concat(t)}var B=new(function(){function e(t){Object(O.a)(this,e),this.name=t,this.grid=new Map}return Object(g.a)(e,[{key:"getCoord",value:function(e){return this.getTile(e.x,e.y)}},{key:"getTile",value:function(e,t){return this.grid.get(R(e,t))}},{key:"hasCoord",value:function(e){return this.hasTile(e.x,e.y)}},{key:"hasTile",value:function(e,t){return this.grid.has(R(e,t))}},{key:"setCoord",value:function(e,t){this.setTile(e,t.x,t.y)}},{key:"setTile",value:function(e,t,o){if(this.hasTile(t,o))throw alert("Already had a tile there!"),"already had a tile!";e.x=t,e.y=o,this.grid.set(R(t,o),e)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(e){this.fillTile(e.x,e.y)}},{key:"fillTile",value:function(e,t){var o=this,n=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(n){return o.getCoord(s({x:e,y:t},n))})),new Set),i=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=o.getCoord(s({x:e,y:t},r));a&&(a.doors.has(function(e){switch(e){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?n.add(r):i.add(r))}));var r=H.filter((function(e){return e.canPlace(n,i)}));if(!r)throw"wow we should really fix that!";var a=r[Math.floor(Math.random()*r.length)].copy();this.setTile(a,e,t)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(e){var t=Object(c.a)(e,2);t[0];return t[1]}))}}]),e}())("Main Floor");B.setTile(E.copy(),0,0);var A={position:{x:0,y:0},height:30,width:15,color:"red",name:"You",velocity:{x:0,y:0},mass:140};function G(){return i.a.createElement(h,{item:A,zIndex:51})}var D=0,S=0,W=function(){},z=!1;var N=!1,U=!1,J=!1,q=!1,V=!1;document.addEventListener("keydown",(function(e){"m"!=e.key&&"M"!=e.key||(V||(z=!z),V=!0),"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(N=!0,J=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(J=!0,N=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(U=!0,q=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||(q=!0,U=!1)})),document.addEventListener("keyup",(function(e){"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(N=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(J=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(U=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||(q=!1),"m"!=e.key&&"M"!=e.key||(V=!1)}));!function e(){var t;z?(N&&(D-=7),J&&(D+=7),U&&(S-=7),q&&(S+=7)):(A.velocity=A.velocity||{x:0,y:0},N&&A.velocity.x>-2&&(A.velocity.x-=.3),J&&A.velocity.x<2&&(A.velocity.x+=.3),U&&A.velocity.y>-2&&(A.velocity.y-=.3),q&&A.velocity.y<2&&(A.velocity.y+=.3)),t=[A],[].concat(Object(u.a)(t),Object(u.a)(d())).forEach((function(e,t){e.velocity.x&&(e.position.x+=e.velocity.x),e.velocity.y&&(e.position.y+=e.velocity.y)})),function(e,t){var o=.5*e.width,n=.5*e.height,i=.5*T,r=i-o,a=i-n,c=f(e.position),l=function(e,t){return{x:e.position.x-300*t.x,y:e.position.y-300*t.y}}(e,c),u=l.x,y=l.y,d=o+v-150,h=-1*d,w=n+v-150,m=-1*w,x=null===t||void 0===t?void 0:t.getCoord(c);function k(e,o){if(!(x&&x.doors.has(o)))return!1;var n=s(e,o);return(null===t||void 0===t?void 0:t.hasCoord(n))||null===t||void 0===t||t.fillCoord(n),!0}if(u<=d&&(Math.abs(y)>a||!k(c,"LEFT"))){if(Math.abs(y)<a+3)return y>0?e.position.y+=a-y:e.position.y-=a+y,void(e.velocity.y=0);e.position.x+=d-u,e.velocity.x=0}if(u>=h&&(Math.abs(y)>a||!k(c,"RIGHT"))){if(Math.abs(y)<a+3)return y>0?e.position.y+=a-y:e.position.y-=a+y,void(e.velocity.y=0);e.position.x+=h-u,e.velocity.x=0}if(y<=w&&(Math.abs(u)>r||!k(c,"TOP"))){if(Math.abs(u)<r+3)return u>0?e.position.x+=r-u:e.position.x-=r+u,void(e.velocity.x=0);e.position.y+=w-y,e.velocity.y=0}if(y>=m&&(Math.abs(u)>r||!k(c,"BOTTOM"))){if(Math.abs(u)<r+3)return u>0?e.position.x+=r-u:e.position.x-=r+u,void(e.velocity.x=0);e.position.y+=m-y,e.velocity.y=0}}(A,B),function(e){[].concat(Object(u.a)(e),Object(u.a)(d())).forEach((function(e){e.velocity&&(e.velocity.x&&(e.velocity.x*=.9,Math.abs(e.velocity.x)<.1&&(e.velocity.x=0)),e.velocity.y&&(e.velocity.y*=.9,Math.abs(e.velocity.y)<.1&&(e.velocity.y=0)))}))}([A]),z||(D=A.position.x,S=A.position.y),W(),requestAnimationFrame((function(){return e()}))}();var Y=function(){var e=i.a.useState(0),t=Object(c.a)(e,2)[1],o=i.a.useCallback((function(){t(Math.random())}),[t]);return i.a.useEffect((function(){W=o}),[o]),i.a.createElement("div",{className:"App",style:{overflow:"hidden"}},z?i.a.createElement("div",{style:{zIndex:100,bottom:0,padding:20,position:"absolute",left:0,right:0}},i.a.createElement("div",{style:{color:"white"}},"Map"),i.a.createElement("button",{onClick:function(){S-=100,o()}},"UP!"),i.a.createElement("button",{onClick:function(){S+=100,o()}},"DOWN!"),i.a.createElement("button",{onClick:function(){D-=100,o()}},"LEFT!"),i.a.createElement("button",{onClick:function(){D+=100,o()}},"RIGHT!"),i.a.createElement("button",{onClick:function(){D=0,S=0,o()}},"CENTER!")):null,i.a.createElement(G,null),i.a.createElement("div",null,null,i.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},B.tiles.map((function(e){return i.a.createElement(x,{overlayMode:z,floor:B,tile:e,key:R(e.x,e.y)})})),d().map((function(e){return i.a.createElement(h,{item:e})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.14957f19.chunk.js.map