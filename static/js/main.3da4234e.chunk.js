(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],[,,,,,,,,,,function(t,e,n){t.exports=n.p+"static/media/dining_room.726d2984.jpg"},function(t,e,n){t.exports=n.p+"static/media/kitchen.46ae08a3.jpg"},function(t,e,n){t.exports=n.p+"static/media/storeroom.b622b705.jpg"},function(t,e,n){t.exports=n.p+"static/media/patio.1d7a8cf4.jpg"},function(t,e,n){t.exports=n.p+"static/media/entrance.b171268f.jpg"},function(t,e){t.exports="data:image/png;base64,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"},function(t,e,n){t.exports=n(23)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(0),o=n.n(i),r=n(9),a=n.n(r),c=(n(21),n(2)),l=n(1),s=n(7);n(22);function u(t,e){var n=t.x,i=t.y;switch(e){case"TOP":return{x:n,y:i-1};case"BOTTOM":return{x:n,y:i+1};case"RIGHT":return{x:n+1,y:i};case"LEFT":return{x:n-1,y:i}}}function d(t,e){return{x:t.x+e.x,y:t.y+e.y}}function h(t,e){return{x:t.x-e.x,y:t.y-e.y}}function y(t,e){return{x:t.x*e,y:t.y*e}}function f(t){return function(t,e){return{x:t.x/e,y:t.y/e}}(t,function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}(t))}function v(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var p=function(){var t=Math.max(window.innerWidth,window.innerHeight);return Math.ceil(t/800)}(),m=10+400*p/12;console.log("ray length",m),window.addEventListener("resize",(function(){m=10+400*p/12,console.log("ray length",m)}));var g=Math.PI/100;function w(t,e,n){for(var i=0,o={x:t.x,y:t.y};!P({position:o,height:1,width:1,velocity:{x:0,y:0}},n)&&i<m;)o.x+=e.x,o.y+=e.y,i++;return o}function x(t){return{x:t.x-Jt+.5*window.innerWidth,y:t.y-Xt+.5*window.innerHeight}}function b(t,e,n){t.clearRect(0,0,window.innerWidth,window.innerHeight);var i=function(t,e){for(var n=[],i=0;i<2*Math.PI;)n.push(w(t,{x:12*Math.cos(i),y:12*Math.sin(i)},e)),i+=g;return n}(e.position,n),o=x(e.position),r=t.createRadialGradient(o.x,o.y,70,o.x,o.y,400*p);r.addColorStop(0,"lightyellow"),r.addColorStop(.07,"rgba(255,255,0,1)"),r.addColorStop(.2,"rgba(255,255,0,.8)"),r.addColorStop(1,"rgba(255,128,0,0)"),t.fillStyle=r,t.strokeStyle="1px lightyellow",t.beginPath();var a=x(e.position);t.moveTo(a.x,a.y),i.forEach((function(e){var n=x(e);t.lineTo(n.x,n.y)}));var c=x(i[0]);t.lineTo(c.x,c.y),t.stroke(),t.fill()}var O={name:"Pick up",canDoOnGround:!0,canDoInInventory:!1,action:function(t,e){if(e.hidden)throw new Error("Cant pick up a hidden item!!!");t.inventory.push(e),e.hidden=!0}},E={name:"Drop",canDoOnGround:!1,canDoInInventory:!0,action:function(t,e){if(!e.hidden)throw new Error("Cant drop up a visible item!!!");var n;e.position={x:(n=t.position).x,y:n.y},t.inventory.splice(t.inventory.indexOf(e),1),e.hidden=!1}},T={name:"Info",canDoOnGround:!0,canDoInInventory:!0,action:function(t,e){alert(e.description)}},k={name:"Try to drop",canDoOnGround:!1,canDoInInventory:!0,action:function(t,e){alert("You can't put it down, it's as if it was part of you now.")}};new Map;function A(t){return{x:t.position.x-.5*t.width,y:t.position.y-.5*t.height,height:t.height,width:t.width}}function M(t,e){var n=A(t),i=A(e);return n.x<i.x+i.width&&n.x+n.width>i.x&&n.y<i.y+i.height&&n.y+n.height>i.y}var I=[];function j(){return I.filter((function(t){return!t.hidden}))}function D(t){var e=t.item,n=t.tileOffset,o=t.center,r=t.zIndex,a=.5*e.width,c=.5*e.height;return i.createElement("div",{title:e.name,style:{position:"absolute",zIndex:r||50,height:e.height,width:e.width,backgroundColor:e.image?void 0:e.color||"grey",left:e.position.x-o.x+.5*window.innerWidth-a-((null===n||void 0===n?void 0:n.x)||0),top:e.position.y-o.y+.5*window.innerHeight-c-((null===n||void 0===n?void 0:n.y)||0)}},e.image?i.createElement("img",{src:e.image,style:{transform:e.imageTransform}}):null)}new Map;var C={position:{x:0,y:30},height:5,width:20,color:"red",name:"Wicked Knife",mass:5,velocity:{x:0,y:0},description:"A sickening looking knife. You can't tell if that is blood or rust on the blade. Yet you feel oddly... compelled to pick it up.",playerInteractions:[O,T,k]},H={position:{x:150,y:180},height:15,width:20,color:"green",name:"Purse",mass:4,velocity:{x:0,y:0},description:"A fancy purse. It looks old, who could have left it here?",playerInteractions:[O,T,E]},B={position:{x:300*(Math.random()-.5),y:150},height:10,width:10,color:"gold",name:"Watch",mass:.5,velocity:{x:0,y:0},description:"A small, worn pocketwatch. It looks like it is made of gold, but the time is stuck at midnight. What could happen if you wind it?",playerInteractions:[O,T,E]};function R(t){return Object(l.a)(Object(l.a)({},t),{},{position:Object(l.a)({},t.position),velocity:Object(l.a)({},t.velocity)})}function L(t){return{x:Math.floor((t.x+200)/400),y:Math.floor((t.y+200)/400)}}function W(t,e){return{x:t.position.x-400*e.x,y:t.position.y-400*e.y}}function P(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=200,o=.5*t.width,r=.5*t.height,a=50,c=a-o,l=a-r,s=L(t.position),u=W(t,s),d=u.x,h=u.y,y=o+12-i,f=-1*y,v=r+12-i,p=-1*v,m=null===e||void 0===e?void 0:e.getCoord(s),g=!1;if(d<=y){var w=S("LEFT",m,h,l,r,n,e);if(Math.abs(h)>l||!w){if(w&&Math.abs(h)<l+3)return h>0?t.position.y+=l-h:t.position.y-=l+h,t.velocity.y=0,!0;t.position.x+=y-d,t.velocity.x=0,g=!0}}if(d>=f){var x=S("RIGHT",m,h,l,r,n,e);if(Math.abs(h)>l||!x){if(x&&Math.abs(h)<l+3)return h>0?t.position.y+=l-h:t.position.y-=l+h,t.velocity.y=0,!0;t.position.x+=f-d,t.velocity.x=0,g=!0}}if(h<=v){var b=S("TOP",m,d,c,o,n,e);if(Math.abs(d)>c||!b){if(b&&Math.abs(d)<c+3)return d>0?t.position.x+=c-d:t.position.x-=c+d,t.velocity.x=0,!0;t.position.y+=v-h,t.velocity.y=0,g=!0}}if(h>=p){var O=S("BOTTOM",m,d,c,o,n,e);if(Math.abs(d)>c||!O){if(O&&Math.abs(d)<c+3)return d>0?t.position.x+=c-d:t.position.x-=c+d,t.velocity.x=0,!0;t.position.y+=p-h,t.velocity.y=0,g=!0}}return g}function S(t,e,n,i,o,r,a){var c=function(t,e){return t&&t.doors.has(e)}(e,t);return Math.abs(n)<=i+o+5&&c&&r&&function(t,e,n){var i=u(e,n);(null===t||void 0===t?void 0:t.hasCoord(i))||null===t||void 0===t||t.fillCoord(i)}(a,e,t),c}function G(t,e){var n=.5*(t.width+e.width)-Math.abs(t.position.x-e.position.x),i=.5*(t.height+e.height)-Math.abs(t.position.y-e.position.y);n<=i?t.position.x<e.position.x?(t.position.x-=n,t.velocity.x=-n):(t.position.x+=n,t.velocity.x=n):t.position.y<e.position.y?(t.position.y-=i,t.velocity.y=-i):(t.position.y+=i,t.velocity.y=i)}var F=0;function K(){var t=Math.max(window.innerWidth,window.innerHeight);return Math.ceil(t/800)}var Q=K();console.log("grid tile tileViewDist",Q),window.addEventListener("resize",(function(){Q=K()})),console.log("Initial view dist",Q);var V=function(t){var e,n,i,r=t.tile,a=t.floor,c=t.overlayMode,l=t.center,s=t.RenderApp,u={x:r.x,y:r.y},d=L(l);return n=u,i=d,Math.max(Math.abs(n.x-i.x),Math.abs(n.y-i.y))>Q?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{zIndex:c?10:4,position:"absolute",height:400,width:400,top:400*r.y+.5*(window.innerHeight-400)-l.y,left:400*r.x+.5*(window.innerWidth-400)-l.x,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:c?void 0:"#663333"}},r.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(t){return o.a.createElement(z,{RenderApp:s,overlayMode:c,tile:r,floor:a,direction:t,hasDoor:r.doors.has(t),opened:r.hasNeighbor(a,t)})}))),null===(e=r.info.items)||void 0===e?void 0:e.filter((function(t){return!t.hidden})).map((function(t){return o.a.createElement(D,{item:t,center:l})})))};function Z(t,e){var n=0,i=0,o=0,r=0,a=e,c=e;switch(t){case"TOP":i="auto",a=void 0;break;case"BOTTOM":n="auto",a=void 0;break;case"RIGHT":o="auto",c=void 0;break;case"LEFT":r="auto",c=void 0}return{top:n,bottom:i,left:o,right:r,width:a,height:c}}var z=function(t){var e=t.direction,n=t.opened,i=t.hasDoor,r=t.tile,a=t.floor,c=t.RenderApp,s="TOP"===e||"BOTTOM"===e,d=o.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:s?"100%":void 0,width:s?void 0:"100%"}});return o.a.createElement("div",{style:Object(l.a)(Object(l.a)({},Z(e,12)),{},{position:"absolute",display:"flex",flexDirection:s?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},d,i?o.a.createElement("div",{style:{cursor:n?void 0:"pointer",height:100,width:100,backgroundColor:n?"":"grey"},onClick:n?void 0:function(){a.fillCoord(u(r.coord,e)),c()}}):null,d)},N=n(3),U=n(4),J=function(){function t(e){Object(N.a)(this,t),this.info=e,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0,this.imageEl_=null;var n=e.doors;this.initialDoors=new Set(n)}return Object(U.a)(t,[{key:"canPlace",value:function(t,e){var n=this,i=!0;return t.forEach((function(t){n.doors.has(t)||(i=!1)})),e.forEach((function(t){n.doors.has(t)&&(i=!1)})),i}},{key:"copy",value:function(e){var n,i=new t(Object(l.a)(Object(l.a)({},this.info),{},{items:null===(n=this.info.items)||void 0===n?void 0:n.map((function(t){return R(t)}))}));return e?i.rotate(e):i.rotate(this.rotation),i}},{key:"rotate",value:function(t){return this.rotation=t%4,this}},{key:"hasNeighbor",value:function(t,e){return t.hasCoord(u(this.coord,e))}},{key:"drawToCanvas",value:function(t,e){var n=function(t,e){return{x:400*t.x+.5*(window.innerWidth-400)-e.x,y:400*t.y+.5*(window.innerHeight-400)-e.y}}(this.coord,e);t.fillStyle="#663333",t.fillRect(n.x-1,n.y-1,402,402)}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var t=this,e=new Set;return this.initialDoors.forEach((function(n){e.add(function(t,e){var n=["TOP","RIGHT","BOTTOM","LEFT"],i=n.indexOf(t);return n[(i+e)%n.length]}(n,t.rotation))})),e}},{key:"image",get:function(){return this.imageEl_?this.imageEl_:this.info.image?(this.imageEl_=document.createElement("img"),this.imageEl_.width=400,this.imageEl_.height=400,void(this.imageEl_.src=this.info.image)):null}}]),t}(),X=n(10),Y=n.n(X),q=n(11),_=n.n(q),$=n(12),tt=n.n($),et=n(13),nt=n.n(et),it=n(14),ot=n.n(it),rt=new J({name:"KITCHEN",doors:["TOP","RIGHT"],image:_.a}),at=new J({name:"PATIO",doors:["TOP","LEFT","BOTTOM"],image:nt.a}),ct=new J({name:"STOREROOM",doors:["TOP"],image:tt.a}),lt=new J({name:"DINING ROOM",doors:["TOP","RIGHT"],image:Y.a}),st=new J({name:"Entrance",doors:["TOP","LEFT","BOTTOM"],image:ot.a}),ut=new J({name:"Hallway",doors:["TOP","LEFT","RIGHT","BOTTOM"]});ut.info.items=[R({position:{x:-70,y:-150},height:70,width:40,color:"tan",name:"Table",blockObjects:!0,mass:70,velocity:{x:0,y:0}})];var dt=new J({name:"Hallway",doors:["TOP","LEFT","RIGHT"]}),ht=new J({name:"Straight",doors:["TOP","BOTTOM"]});ht.info.items=[R(B)];var yt=new J({name:"Hallway",doors:["TOP","RIGHT"]}),ft=new J({name:"Hallway",doors:["TOP","LEFT"]});ft.info.items=[R(C)];var vt=new J({name:"Closet",doors:["TOP"]});function pt(t){return[t,t.copy(1),t.copy(2),t.copy(3)]}function mt(t){return[t,t.copy(1)]}vt.info.items=[R(H)];var gt=[].concat(Object(c.a)(mt(ut)),Object(c.a)(mt(ht)),Object(c.a)(pt(dt)),Object(c.a)(pt(yt)),Object(c.a)(pt(ft)),Object(c.a)(pt(vt)),Object(c.a)(pt(rt)),Object(c.a)(pt(ct)),Object(c.a)(pt(at)),Object(c.a)(pt(lt)));function wt(t){var e=document.createElement("canvas");return e.id="Canvas_FloorAndItems",e.width=window.innerWidth,e.height=window.innerHeight,document.addEventListener("resize",(function(){e.height=window.innerHeight,e.width=window.innerWidth})),{canvas:e,ctx:e.getContext("2d")}}var xt,bt,Ot=wt(),Et=Ot.canvas,Tt=Ot.ctx,kt=wt(),At=kt.canvas,Mt=kt.ctx;function It(t,e,n){!function(t,e){Tt.clearRect(0,0,window.innerWidth,window.innerHeight),t.tiles.forEach((function(t){t.drawToCanvas(Tt,e)}))}(e,n),function(t,e){b(Mt,t,e),Mt.filter="blur(5px)"}(t,e),function(){if(!xt&&!(xt=document.getElementById("Canvas_SightResult")))return;bt||(bt=xt.getContext("2d")).save();bt.clearRect(0,0,window.innerWidth,window.innerHeight),bt.globalCompositeOperation="source-over",bt.restore(),bt.drawImage(At,0,0),bt.globalCompositeOperation="source-in",bt.drawImage(Et,0,0)}()}document.body.append(Et),document.body.append(At);var jt=function(){function t(e,n,i,o){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Object(N.a)(this,t),this.holder=new Map,e+n+i+o>15&&!r)throw new Error("You can't be that great!!");this.holder.set("strength",e),this.holder.set("dexterity",n),this.holder.set("intellect",i),this.holder.set("spirit",o),this.holder.set("fear",0)}return Object(U.a)(t,[{key:"get",value:function(t){return this.holder.get(t)}},{key:"roll",value:function(t){return function(t){for(var e=0,n=0;n<2*t;n++)e+=Math.random();return e}(this.get(t))}},{key:"buff",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){throw new Error("Method not implemented.")}))},{key:"damage",value:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){throw new Error("Method not implemented.")}))}]),t}(),Dt=[];function Ct(){return j().filter((function(t){return!!t.decide_move}))}var Ht=function(){function t(){Object(N.a)(this,t),this.attackType="strength",this.inventory=[],this.stats=new jt(1,1,1,1),this.position={x:0,y:0},this.height=40,this.width=40,this.name="Monster",this.color="green",this.moveable=!0,this.blockObjects=!0,this.mass=100,this.velocity={x:0,y:0},Dt.push(this)}return Object(U.a)(t,[{key:"getClosestPlayer",value:function(t){var e=this,n=t[0],i=Number.MAX_VALUE;return t.forEach((function(t){var o=v(t.position,e.position);o<i&&(i=o,n=t)})),{closest:n,closestDistance:i}}},{key:"decide_move",value:function(t){var e=this.getClosestPlayer(t),n=e.closest,i=e.closestDistance;this.velocity=i<600?y(f(h(n.position,this.position)),3):{x:0,y:0}}},{key:"checkForAttack",value:function(t){var e=this.getClosestPlayer(t),n=e.closest;return e.closestDistance<10+Math.max(this.width,this.height)?n:null}}]),t}();function Bt(t,e){return"".concat(t,", ").concat(e)}var Rt=new(function(){function t(e){Object(N.a)(this,t),this.name=e,this.grid=new Map}return Object(U.a)(t,[{key:"getCoord",value:function(t){return this.getTile(t.x,t.y)}},{key:"getTile",value:function(t,e){return this.grid.get(Bt(t,e))}},{key:"hasCoord",value:function(t){return this.hasTile(t.x,t.y)}},{key:"hasTile",value:function(t,e){return this.grid.has(Bt(t,e))}},{key:"setCoord",value:function(t,e){this.setTile(t,e.x,e.y)}},{key:"setTile",value:function(t,e,n){var i,o;if(this.hasTile(e,n))throw new Error("Tried placing a tile where there already was one! ".concat(e,". ").concat(n,": ").concat(t.info.name,", existing tile was ").concat(null===(o=this.getTile(e,n))||void 0===o?void 0:o.info.name));t.x=e,t.y=n;var r=y(d(t.coord,{x:0,y:0}),400);t.info.items=null===(i=t.info.items)||void 0===i?void 0:i.filter((function(t){return t.position=d(t.position,r),!t.moveable||(function(t){I.push(t)}(t),!1)})),this.grid.set(Bt(e,n),t)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(t){this.fillTile(t.x,t.y)}},{key:"fillTile",value:function(t,e){var n=this,i=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(i){return n.getCoord(u({x:t,y:e},i))})),new Set),o=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=n.getCoord(u({x:t,y:e},r));a&&(a.doors.has(function(t){switch(t){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?i.add(r):o.add(r))}));var r=gt.filter((function(t){return t.canPlace(i,o)}));if(!r)throw new Error("No valid tile can go there! Wow we should really fix that!");var a=r[Math.floor(Math.random()*r.length)].copy();this.setTile(a,t,e)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(t){var e=Object(s.a)(t,2);e[0];return e[1]}))}}]),t}())("Main Floor"),Lt=st.copy(),Wt=new Ht;Wt.position.x=-125,Wt.position.y=125,Lt.info.items=[Wt],Rt.setTile(Lt,0,0);var Pt=n(15),St={position:{x:0,y:0},height:50,width:25,color:"red",name:"You",velocity:{x:0,y:0},mass:140,image:n.n(Pt).a,blockObjects:!0,moveable:!0,stats:new jt(4,4,4,3),inventory:[]};function Gt(t){return o.a.createElement(D,{item:St,zIndex:51,center:t.center})}var Ft={zIndex:75,position:"absolute",border:"2px solid white",backgroundColor:"#442211",padding:5,color:"white"},Kt=[];function Qt(t){var e=x(t);return{top:e.y,left:e.x,position:"absolute"}}function Vt(t){var e,n,o=t.item,r=t.player,a=t.inInventory,c=void 0!==a&&a,l=t.onGround,s=void 0!==l&&l;return i.createElement(i.Fragment,null,i.createElement("div",null,o.name),null===(e=o.playerInteractions)||void 0===e||null===(n=e.filter((function(t){return(t.canDoInInventory||!c)&&(t.canDoOnGround||!s)})))||void 0===n?void 0:n.map((function(t){return i.createElement("button",{style:{cursor:"pointer"},onClick:function(){return t.action(r,o)}},t.name)})))}function Zt(t){var e=t.player;return Kt.length<=0?null:i.createElement(i.Fragment,null,Kt.filter((function(t){var e;return t.name||(null===(e=t.playerInteractions)||void 0===e?void 0:e.length)})).map((function(t){return i.createElement("div",{style:Object(l.a)(Object(l.a)(Object(l.a)({},Ft),{},{zIndex:100},Qt((n=t.position,o={x:.5*t.width+5,y:.5*t.height+5},{x:n.x+o.x,y:n.y+o.y}))),{},{textAlign:"center",display:"flex",flexDirection:"column"})},i.createElement(Vt,{item:t,player:e,onGround:!0}));var n,o})))}function zt(t){var e=t.player,n=e.inventory;return n.length<=0?null:i.createElement("div",{style:Object(l.a)(Object(l.a)({},Ft),{},{zIndex:75,bottom:20,left:20})},i.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"stretch"}},n.map((function(t){return i.createElement("div",{style:{padding:10,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"}},t.image?i.createElement("img",{src:t.image,style:{cursor:"pointer",maxWidth:50,maxHeight:50}}):i.createElement("div",{style:{cursor:"pointer",backgroundColor:t.color,width:t.width,height:t.height}}),i.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.createElement(Vt,{item:t,player:e,inInventory:!0})))}))))}function Nt(t){var e=t.player.stats;return i.createElement("div",{style:Object(l.a)(Object(l.a)({},Ft),{},{top:20,right:20})},i.createElement(Ut,{statType:"strength",num:e.get("strength")}),i.createElement(Ut,{statType:"dexterity",num:e.get("dexterity")}),i.createElement(Ut,{statType:"intellect",num:e.get("intellect")}),i.createElement(Ut,{statType:"spirit",num:e.get("spirit")}),i.createElement(Ut,{statType:"fear",num:e.get("fear")}))}function Ut(t){var e=t.statType,n=t.num;return i.createElement("div",null,i.createElement("div",null,e,": ",n))}var Jt=0,Xt=0,Yt=function(){},qt=!1,_t={position:"absolute",zIndex:5,width:"100%",height:"100%",top:0,right:0,bottom:0,left:0};var $t=!1,te=!1,ee=!1,ne=!1,ie=!1;document.addEventListener("keydown",(function(t){"m"!==t.key&&"M"!==t.key||(ie||(qt=!qt),ie=!0),"a"!==t.key&&"A"!==t.key&&"ArrowLeft"!==t.key||($t=!0,ee=!1),"d"!==t.key&&"D"!==t.key&&"ArrowRight"!==t.key||(ee=!0,$t=!1),"w"!==t.key&&"W"!==t.key&&"ArrowUp"!==t.key||(te=!0,ne=!1),"s"!==t.key&&"S"!==t.key&&"ArrowDown"!==t.key||(ne=!0,te=!1)})),document.addEventListener("keyup",(function(t){"a"!==t.key&&"A"!==t.key&&"ArrowLeft"!==t.key||($t=!1),"d"!==t.key&&"D"!==t.key&&"ArrowRight"!==t.key||(ee=!1),"w"!==t.key&&"W"!==t.key&&"ArrowUp"!==t.key||(te=!1),"s"!==t.key&&"S"!==t.key&&"ArrowDown"!==t.key||(ne=!1),"m"!==t.key&&"M"!==t.key||(ie=!1)}));!function t(){var e,n,i;qt?($t&&(Jt-=7),ee&&(Jt+=7),te&&(Xt-=7),ne&&(Xt+=7)):(St.velocity=St.velocity||{x:0,y:0},$t&&St.velocity.x>-2&&(St.velocity.x-=.3,St.imageTransform=void 0),ee&&St.velocity.x<2&&(St.velocity.x+=.3,St.imageTransform="scale(-1,1)"),te&&St.velocity.y>-2&&(St.velocity.y-=.3),ne&&St.velocity.y<2&&(St.velocity.y+=.3)),i=[St].concat(Object(c.a)(Ct())),[].concat(Object(c.a)(i),Object(c.a)(j())).forEach((function(t,e){t.velocity.x&&(t.position.x+=t.velocity.x),t.velocity.y&&(t.position.y+=t.velocity.y)})),P(St,Rt,!0),j().filter((function(t){return t.moveable&&t.blockObjects})).forEach((function(t){return P(t,Rt)})),Ct().forEach((function(t){var e=t.checkForAttack([St]);if(e){var n=e.stats.roll(t.attackType),i=t.stats.roll(t.attackType);console.log("Monster did ".concat(i-n," damage!"))}})),function(t){[].concat(Object(c.a)(t),Object(c.a)(j())).forEach((function(t){t.velocity&&(t.velocity.x&&(t.velocity.x*=.9,Math.abs(t.velocity.x)<.1&&(t.velocity.x=0)),t.velocity.y&&(t.velocity.y*=.9,Math.abs(t.velocity.y)<.1&&(t.velocity.y=0)))}))}([St]);var o,r,a=null===(e=Rt.getCoord(L(St.position)))||void 0===e||null===(n=e.info.items)||void 0===n?void 0:n.filter((function(t){return!t.hidden}));!function(t){Kt=t}((o=St,r=[].concat(Object(c.a)(j()),Object(c.a)(a||[])),r.filter((function(t,e){return v(o.position,t.position)<5+.4*(t.width+t.height+o.width+o.height)})))),function(t){var e=[].concat(Object(c.a)(t),Object(c.a)(j())).filter((function(t){return t.blockObjects||t.moveable}));e.length>F&&(console.log("checking collisions for ".concat(e.length," items")),F=e.length),e.forEach((function(t,n){if(n<e.length-1)for(var i=n+1;i<e.length;i++)if(M(t,e[i])){var o=t.blockObjects&&!t.moveable,r=e[i].blockObjects&&!e[i].moveable;o&&!r?G(e[i],t):!o&&r&&G(t,e[i])}}))}([St].concat(Object(c.a)((null===a||void 0===a?void 0:a.filter((function(t){return t.moveable||t.blockObjects})))||[]))),qt||(Jt=St.position.x,Xt=St.position.y),It(St,Rt,{x:Jt,y:Xt}),Yt(),requestAnimationFrame((function(){return t()}))}(),setInterval((function(){Ct().forEach((function(t){return t.decide_move([St])})),console.log("Monsters",Ct(),j())}),1e3);var oe=function(){var t=o.a.useState(0),e=Object(s.a)(t,2)[1],n=o.a.useCallback((function(){e(Math.random())}),[e]);o.a.useEffect((function(){Yt=n}),[n]);var i={x:Jt,y:Xt};return o.a.createElement("div",{className:"App",style:{overflow:"hidden"}},qt?o.a.createElement("div",{style:{zIndex:100,bottom:0,padding:20,position:"absolute",left:0,right:0}},o.a.createElement("div",{style:{color:"white"}},"Map"),o.a.createElement("button",{onClick:function(){Xt-=100,n()}},"UP!"),o.a.createElement("button",{onClick:function(){Xt+=100,n()}},"DOWN!"),o.a.createElement("button",{onClick:function(){Jt-=100,n()}},"LEFT!"),o.a.createElement("button",{onClick:function(){Jt+=100,n()}},"RIGHT!"),o.a.createElement("button",{onClick:function(){Jt=0,Xt=0,n()}},"CENTER!")):null,o.a.createElement(Gt,{center:i}),o.a.createElement("div",null,null,o.a.createElement("canvas",{id:"Canvas_SightResult",width:window.innerWidth,height:window.innerHeight,style:Object(l.a)(Object(l.a)({},_t),{},{zIndex:6})}),o.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},Rt.tiles.map((function(t){return o.a.createElement(V,{RenderApp:n,center:i,overlayMode:!0,floor:Rt,tile:t,key:Bt(t.x,t.y)})})),j().map((function(t){return o.a.createElement(D,{item:t,center:i})})))),o.a.createElement(Zt,{player:St}),o.a.createElement(zt,{player:St}),o.a.createElement(Nt,{player:St}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.3da4234e.chunk.js.map