(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],[,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAyCAYAAACpgnCWAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpaVUHCwo4pChOlkQv3CUKhbBQmkrtOpgcumH0KQhSXFxFFwLDn4sVh1cnHV1cBUEwQ8QJ0cnRRcp8X9JoUWMB8f9eHfvcfcOEBoVpppdY4CqWUY6ERdz+RUx8IoQ+hFAEFMSM/VkZiELz/F1Dx9f72I8y/vcn6NHKZgM8InEs0w3LOJ14ulNS+e8TxxhZUkhPiceNeiCxI9cl11+41xyWOCZESObniOOEIulDpY7mJUNlXiSOKqoGuULOZcVzluc1UqNte7JXxguaMsZrtMcQgKLSCIFETJq2EAFFmK0aqSYSNN+3MM/6PhT5JLJtQFGjnlUoUJy/OB/8Ltbszgx7iaF40D3i21/DAOBXaBZt+3vY9tungD+Z+BKa/urDWDmk/R6W4seAb3bwMV1W5P3gMsdYOBJlwzJkfw0hWIReD+jb8oDfbdAaNXtrbWP0wcgS10t3QAHh8BIibLXPN4d7Ozt3zOt/n4Ahodyr3VoJPUAAAAGYktHRAANAJMAAP6GeWcAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfkChcHEiZpyWcYAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAB/ZJREFUWMPtl2twlNUZx3/nveTda3azySZLINAgJAEviMUK1KB4aStVa4s61WnHqlXasbHTi6Mf6jidcVrttDpT6tQZx+ZDrXZwxhkvaBUBKQKCsQFBxBgvJAFCLhuybzZ7ed/3nH5gN2TXGAkzfvP5tHsu7/88//M8/+c5IryeL900+ArkK5AvyYyZLJ611a8Bs4HLgQQCpZviIyGQQB7Bpt4V47kvBGn6IKwB1cBwV7Mty6YbgY1AMwAKvLw69TG/+M+cnYFfejnVfWx1Rk4J0rgvGPZ09QBwhZORr819O/DW4Ae5jvql/pxuiMEx4f5UqZMAokC0mnQMN6O+IzTeEhorgUNTgmi6uEs3xW8AdFNfAlDbYg1JVw27GXnUDGlz8gXnlJyaUiWp0k3R3vRBeHVXs50F0K01pxaEDxv7paQWxQJNFxaAYWkBwxA1YZ/RKExRrUQpRVOaYA4C23/I2DXW6KoSkL6HnJw/zqsgXtd04pohWopzDgolwLAEhiWICJ1xp9QdIYrugMyr1dJTT6fnu8kSEGsNZJqlZ89z++KjvhfjjuZboKwVMauCiKYzIt0irXg+MHwCw6ehPFDehBcT7Cvwp+e7L4rpVLhtb/3V8Zj/Rd3SUArGpceY5xHQdWzPRc8rQn6TE47DkbEcewbskv1WWDtSEdYaSzwpt+XHw4cdV+13smphTS6SUISoVn4i4wa5tMPI8DiLzVqW+KqJBjU1L2wJnyE4Op4HoCIgKjVTvDQtyO6E7e2qTb3n/JPEynOWXvpUlYEZXMZSrYIDlVFOhBpYYcWp8yQx5ReWKagJGbSEAwQ1zfEJrS1leC+flqz8rLVp2SJ9jDtyirOcJKbMIAyDXGUVmhAIICBNYtKPEBDzm5wbCXd8LWM90dVsO6clK4N29kBLXeTqc3MKlTsGKG5IG4zr41Q7p+6hxgtwQssyqKdxPXnwyeVH3dMWSDvn/rGjZ3jLyeBRCCAoXeLOKBpyktoKjg5lAQgFjK4ZqfCDVx1MDdjZ73f2JXdNHs86HurUQXhub0/3ps7+m6VUv9I08dhE/sykkfjtC83RsM+8P+d68xQsODBm+753Vn3T4nhEdA/aHX/Z/N71b/baveH1lGSpOJNuJfLuWbp/duAbVpXvkVv7xEXfIiIG3fzIloXqzlci6hiwpyu53TmjelK0ukvrK72c94hu6culocOnkK8xqg4FnWcLSx5qirU+DvR2JbfLGYE0xVqDSqp1XsZdq/uM5QCvRDxkI+wPSHqNCeG8D7gKuBbo+QyI3QZAALgC+BAYBdSPz5/lW/RD+adkjXH9bp9gvKBRoyA3RDwxoVqKcQQBYEmhgrYbZQDa+uvOO//sWZFn+1PZxgE7k9I1bVATyLqwP9I8HKhjGERTni0BWRRErUzmA5P+XdcUa91gdF4Uuxy4GHj0lgYntigR2RwP+aLxkA+IRoDITCj1KViaO4nbaclrs4LbDOB1gN4j7tWVIT1taiJa3HA8laHfzuI39WFN8HbWla811lfu+8hSAvg6sAr47mSQ8/KCW7srpC5Rr85zntwQ8f4xQVdVVFvm1qbY2zfCZc0JAA72j3L38/sxhQiGDHFgxJFPhNczxig0xVq3AifKQXpMsPEOVUt98VWfmr0PNryR1oD3ADo6c7yzV7L1w36Sha4mnT9ZpByl8iOOTJYxUw3cWE5XUlOkHCcDINTJpDSANYND3g/an8nOT46y8ZA+mv9v90B8yeyqc3Z/MrgLSAM28HHh90ScACMlSapg7YhBva4vKOS8O5HxdhsaEC6EK0UVKITzqUZjfUnOXGLAG42uoCEvsCQsTxrMS5YE26Ur527aZhQ2yyLANFZVPHlTrFUDVi10BLf1mMTt0igeqPDer83rbcDOL5SVgpdFG5s0NduEHy239RKArAnbZzts9DI794jdm09buyZR5EwavrjeE02NZR5sanB4vtIjOyZqmkKtZlEkp63xn2eVQyt7xtLB2mN1Yxdkg5KMBVvqXTaHJDkBWoXeArw0nOk5csYqnN7QcGEabu9YHH9st5ubb8zKLDHzsl6lK9DrRnGd/r/5EmbnGUt9bfs9fuDnAO7BwF0QwOmqmsRlLXZe5jLrXnDO6BEUffxOS0rnT8Ba1Oe13BDUG7fO+KW1s+dK8e99K6MLjeS9mmb+otD4aie7eLfbyaX2lL4OKlpmDPJ+/+hCYM+q+tTvS54JyntWSvcCpeSOsi0dMwJ5unNFNBa0Ns+tCi68pkXR6ju4XUrnr8DtQui3DN+x3p4nhiZKovRy9xeT8LQu3m5D4zb+UBf2zQH4ZDh1OFExfM3QTRtL1OHXFw7MqQxoDKfdse6BoecfWrPDOW1PbjovMT/rejcUakv/cTtz8WNruz8jP/2j9sd1wRSLa8dDaxb7/76z58rgtJ60N2zTgASwIHVzx70NRqpGDf6P4/bIw/dd9m7fVIfZ8fHgE7Gg9ZOzZ0UThia+6Ur18puHr3hQE+KNlXM3TdkLzwGeAlorW5bRB1jRBa6T3/FO2X1O2L/2Hfu0PuJfHfVXPDc7GlikG9aqXKTltdFY093tid89XtLctTds8wOPAuvKP5TPZf+8buDb93wete0N2/zjo8k2/9Dh+yvjiZBdOas4dVG5JzdOBQBgVljvTwNgAvcGIrEHiMSwTx3s7QrL12lMUVI/QznwjBDimWliZCnwQPmgbpgP39p7ifN/jBc0XdEwO3oAAAAASUVORK5CYII="},function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),r=n(9),a=n.n(r),l=(n(16),n(2)),c=n(1),s=n(7);n(17);function u(e,t){var n=e.x,o=e.y;switch(t){case"TOP":return{x:n,y:o-1};case"BOTTOM":return{x:n,y:o+1};case"RIGHT":return{x:n+1,y:o};case"LEFT":return{x:n-1,y:o}}}function d(e,t){return{x:e.x+t.x,y:e.y+t.y}}var y={name:"Pick up",canDoOnGround:!0,canDoInInventory:!1,action:function(e,t){if(t.hidden)throw new Error("Cant pick up a hidden item!!!");e.inventory.push(t),t.hidden=!0}},h={name:"Drop",canDoOnGround:!1,canDoInInventory:!0,action:function(e,t){if(!t.hidden)throw new Error("Cant drop up a visible item!!!");var n;t.position={x:(n=e.position).x,y:n.y},e.inventory.splice(e.inventory.indexOf(t),1),t.hidden=!1}},f={name:"Info",canDoOnGround:!0,canDoInInventory:!0,action:function(e,t){alert(t.description)}};var v=[];function p(){return v.filter((function(e){return!e.hidden}))}function m(e){var t=e.item,n=e.tileOffset,i=.5*t.width,r=.5*t.height;return o.createElement("div",{title:t.name,style:{position:"absolute",zIndex:e.zIndex||50,height:t.height,width:t.width,backgroundColor:t.image?void 0:t.color||"grey",top:t.position.y-ye+.5*window.innerHeight-r-((null===n||void 0===n?void 0:n.y)||0),left:t.position.x-de+.5*window.innerWidth-i-((null===n||void 0===n?void 0:n.x)||0)}},t.image?o.createElement("img",{src:t.image,style:{transform:t.imageTransform}}):null)}var w={position:{x:0,y:30},height:5,width:20,color:"red",name:"Wicked Knife",mass:5,velocity:{x:0,y:0},description:"A sickening looking knife. You can't tell if that is blood or rust on the blade. Yet you feel oddly... compelled to pick it up.",playerInteractions:[y,f,{name:"Try to drop",canDoOnGround:!1,canDoInInventory:!0,action:function(e,t){alert("You can't put it down, it's as if it was part of you now.")}}]},g={position:{x:150,y:180},height:15,width:20,color:"green",name:"Purse",mass:4,velocity:{x:0,y:0},description:"A fancy purse. It looks old, who could have left it here?",playerInteractions:[y,f,h]},x={position:{x:300*(Math.random()-.5),y:150},height:10,width:10,color:"gold",name:"Watch",mass:.5,velocity:{x:0,y:0},description:"A small, worn pocketwatch. It looks like it is made of gold, but the time is stuck at midnight. What could happen if you wind it?",playerInteractions:[y,f,h]};function O(e){return Object(c.a)(Object(c.a)({},e),{},{position:Object(c.a)({},e.position),velocity:Object(c.a)({},e.velocity)})}function T(e){return{x:Math.floor((e.x+200)/400),y:Math.floor((e.y+200)/400)}}function b(e,t){return{x:e.position.x-400*t.x,y:e.position.y-400*t.y}}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=200,i=.5*e.width,r=.5*e.height,a=.5*D,l=a-i,c=a-r,s=T(e.position),u=b(e,s),d=u.x,y=u.y,h=i+M-o,f=-1*h,v=r+M-o,p=-1*v,m=null===t||void 0===t?void 0:t.getCoord(s);if(d<=h){var w=A("LEFT",m,y,c,r,n,t);if(Math.abs(y)>c||!w)return w&&Math.abs(y)<c+3?(y>0?e.position.y+=c-y:e.position.y-=c+y,e.velocity.y=0,!0):(e.position.x+=h-d,e.velocity.x=0,!0)}if(d>=f){var g=A("RIGHT",m,y,c,r,n,t);if(Math.abs(y)>c||!g)return g&&Math.abs(y)<c+3?(y>0?e.position.y+=c-y:e.position.y-=c+y,e.velocity.y=0,!0):(e.position.x+=f-d,e.velocity.x=0,!0)}if(y<=v){var x=A("TOP",m,d,l,i,n,t);if(Math.abs(d)>l||!x)return x&&Math.abs(d)<l+3?(d>0?e.position.x+=l-d:e.position.x-=l+d,e.velocity.x=0,!0):(e.position.y+=v-y,e.velocity.y=0,!0)}if(y>=p){var O=A("BOTTOM",m,d,l,i,n,t);if(Math.abs(d)>l||!O)return O&&Math.abs(d)<l+3?(d>0?e.position.x+=l-d:e.position.x-=l+d,e.velocity.x=0,!0):(e.position.y+=p-y,e.velocity.y=0,!0)}return!1}function A(e,t,n,o,i,r,a){var l=function(e,t){return e&&e.doors.has(t)}(t,e);return Math.abs(n)<=o+i+5&&l&&r&&function(e,t,n){var o=u(t,n);(null===e||void 0===e?void 0:e.hasCoord(o))||null===e||void 0===e||e.fillCoord(o)}(a,t,e),l}function k(e,t){return t.filter((function(t,n){return o=e.position,i=t.position,Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))<5+.25*(t.width+t.height+e.width+e.height);var o,i}))}var M=12,D=100,I=Math.max(window.innerWidth,window.innerHeight),B=Math.ceil(I/800);window.addEventListener("resize",(function(){I=Math.max(window.innerWidth,window.innerHeight),B=Math.ceil(I/800),console.log("Updated view dist",B)})),console.log("Initial view dist",B);var C=function(e){var t,n,o,r=e.tile,a=e.floor,l=e.overlayMode,c={x:r.x,y:r.y},s=T({x:de,y:ye});return n=c,o=s,Math.max(Math.abs(n.x-o.x),Math.abs(n.y-o.y))>B?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{zIndex:l?10:4,position:"absolute",height:400,width:400,top:400*r.y+.5*(window.innerHeight-400)-ye,left:400*r.x+.5*(window.innerWidth-400)-de,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:l?void 0:"#663333"}},r.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(e){return i.a.createElement(H,{overlayMode:l,tile:r,floor:a,direction:e,hasDoor:r.doors.has(e),opened:r.hasNeighbor(a,e)})}))),null===(t=r.info.items)||void 0===t?void 0:t.filter((function(e){return!e.hidden})).map((function(e){return i.a.createElement(m,{item:e})})))};function j(e,t){var n=0,o=0,i=0,r=0,a=t,l=t;switch(e){case"TOP":o="auto",a=void 0;break;case"BOTTOM":n="auto",a=void 0;break;case"RIGHT":i="auto",l=void 0;break;case"LEFT":r="auto",l=void 0}return{top:n,bottom:o,left:i,right:r,width:a,height:l}}var H=function(e){var t=e.direction,n=e.opened,o=e.hasDoor,r=e.tile,a=e.floor,l=e.overlayMode,s="TOP"===t||"BOTTOM"===t,d=i.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:s?"100%":void 0,width:s?void 0:"100%"}});return i.a.createElement("div",{style:Object(c.a)(Object(c.a)({},j(t,l?3:M)),{},{position:"absolute",display:"flex",flexDirection:s?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},d,o?i.a.createElement("div",{style:{cursor:n?void 0:"pointer",height:D,width:D,backgroundColor:n?"":"grey"},onClick:n?void 0:function(){a.fillCoord(u(r.coord,t)),he()}}):null,d)},L=n(5),W=n(6),R=function(){function e(t){Object(L.a)(this,e),this.info=t,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0;var n=t.doors;this.initialDoors=new Set(n)}return Object(W.a)(e,[{key:"canPlace",value:function(e,t){var n=this,o=!0;return e.forEach((function(e){n.doors.has(e)||(o=!1)})),t.forEach((function(e){n.doors.has(e)&&(o=!1)})),o}},{key:"copy",value:function(t){var n,o=new e(Object(c.a)(Object(c.a)({},this.info),{},{items:null===(n=this.info.items)||void 0===n?void 0:n.map((function(e){return O(e)}))}));return t?o.rotate(t):o.rotate(this.rotation),o}},{key:"rotate",value:function(e){return this.rotation=e%4,this}},{key:"hasNeighbor",value:function(e,t){return e.hasCoord(u(this.coord,t))}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var e=this,t=new Set;return this.initialDoors.forEach((function(n){t.add(function(e,t){var n=["TOP","RIGHT","BOTTOM","LEFT"],o=n.indexOf(e);return n[(o+t)%n.length]}(n,e.rotation))})),t}}]),e}(),P=new R({name:"Fourway",doors:["TOP","LEFT","RIGHT","BOTTOM"]});P.info.items=[O({position:{x:-165,y:-150},height:70,width:40,color:"tan",name:"Table",mass:70,velocity:{x:0,y:0}})];var Q=new R({name:"TeeWay",doors:["TOP","LEFT","RIGHT"]}),Z=new R({name:"Straight",doors:["TOP","BOTTOM"]});Z.info.items=[O(x)];var K=new R({name:"LTurn",doors:["TOP","RIGHT"]}),G=new R({name:"RTurn",doors:["TOP","LEFT"]});G.info.items=[O(w)];var S=new R({name:"DeadEnd",doors:["TOP"]});function V(e){return[e,e.copy(1),e.copy(2),e.copy(3)]}function F(e){return[e,e.copy(1)]}S.info.items=[O(g)];var z=[].concat(Object(l.a)(F(P)),Object(l.a)(F(Z)),Object(l.a)(V(Q)),Object(l.a)(V(K)),Object(l.a)(V(G)),Object(l.a)(V(S)));function U(e,t){return"".concat(e,", ").concat(t)}var N=new(function(){function e(t){Object(L.a)(this,e),this.name=t,this.grid=new Map}return Object(W.a)(e,[{key:"getCoord",value:function(e){return this.getTile(e.x,e.y)}},{key:"getTile",value:function(e,t){return this.grid.get(U(e,t))}},{key:"hasCoord",value:function(e){return this.hasTile(e.x,e.y)}},{key:"hasTile",value:function(e,t){return this.grid.has(U(e,t))}},{key:"setCoord",value:function(e,t){this.setTile(e,t.x,t.y)}},{key:"setTile",value:function(e,t,n){var o;if(this.hasTile(t,n))throw alert("Already had a tile there!"),"already had a tile!";e.x=t,e.y=n;var i,r,a=(i=d(e.coord,{x:0,y:0}),r=400,{x:i.x*r,y:i.y*r});console.log("tile center!",a),null===(o=e.info.items)||void 0===o||o.forEach((function(e){console.log("item "+e.name,e.position),e.position=d(e.position,a),console.log("new position "+e.name,e.position)})),this.grid.set(U(t,n),e)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(e){this.fillTile(e.x,e.y)}},{key:"fillTile",value:function(e,t){var n=this,o=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(o){return n.getCoord(u({x:e,y:t},o))})),new Set),i=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=n.getCoord(u({x:e,y:t},r));a&&(a.doors.has(function(e){switch(e){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?o.add(r):i.add(r))}));var r=z.filter((function(e){return e.canPlace(o,i)}));if(!r)throw new Error("No valid tile can go there! Wow we should really fix that!");var a=r[Math.floor(Math.random()*r.length)].copy();this.setTile(a,e,t)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(e){var t=Object(s.a)(e,2);t[0];return t[1]}))}}]),e}())("Main Floor");N.setTile(P.copy(),0,0);var J,X;window.addEventListener("resize",(function(){J.width=window.innerWidth,J.height=window.innerHeight}));var Y=M,q=10+400*B/Y;console.log("ray length",q),window.addEventListener("resize",(function(){q=10+400*B/Y,console.log("ray length",q)}));var $=Math.PI/100;function _(e,t,n){for(var o=0,i={x:e.x,y:e.y};!E({position:i,height:1,width:1,velocity:{x:0,y:0}},n)&&o<q;)i.x+=t.x,i.y+=t.y,o++;return i}function ee(e){return{x:e.x-de+.5*window.innerWidth,y:e.y-ye+.5*window.innerHeight}}function te(e,t){if(!X){if(!(J=document.getElementById("fog")))return;if(J.width=window.innerWidth,J.height=window.innerHeight,!(X=J.getContext("2d")))return}X.clearRect(0,0,J.width,J.height);var n=function(e,t){for(var n=[],o=0;o<2*Math.PI;)n.push(_(e,{x:Math.cos(o)*Y,y:Math.sin(o)*Y},t)),o+=$;return n}(e.position,t);X.fillStyle="lightyellow",X.strokeStyle="1px lightyellow",X.beginPath();var o=ee(e.position);X.moveTo(o.x,o.y),n.forEach((function(e){var t=ee(e);X.lineTo(t.x,t.y)}));var i=ee(n[0]);X.lineTo(i.x,i.y),X.stroke(),X.fill()}var ne=n(10),oe={position:{x:0,y:0},height:50,width:25,color:"red",name:"You",velocity:{x:0,y:0},mass:140,image:n.n(ne).a,fear:0,health:100,intelligence:5,speed:2,inventory:[],spirit:2,strength:5};function ie(){return i.a.createElement(m,{item:oe,zIndex:51})}var re=[];function ae(e){var t=ee(e);return{top:t.y,left:t.x,position:"absolute"}}var le={position:"absolute",border:"2px solid white",backgroundColor:"#442211",padding:5,color:"white"};function ce(e){var t,n,i=e.item,r=e.player,a=e.inInventory,l=void 0!==a&&a,c=e.onGround,s=void 0!==c&&c;return o.createElement(o.Fragment,null,o.createElement("div",null,i.name),null===(t=i.playerInteractions)||void 0===t||null===(n=t.filter((function(e){return(e.canDoInInventory||!l)&&(e.canDoOnGround||!s)})))||void 0===n?void 0:n.map((function(e){return o.createElement("button",{style:{cursor:"pointer"},onClick:function(){return e.action(r,i)}},e.name)})))}function se(e){var t=e.player;return re.length<=0?null:o.createElement(o.Fragment,null,re.map((function(e){return o.createElement("div",{style:Object(c.a)(Object(c.a)(Object(c.a)({},le),{},{zIndex:100},ae((n=e.position,i={x:.5*e.width+5,y:.5*e.height+5},{x:n.x+i.x,y:n.y+i.y}))),{},{textAlign:"center",display:"flex",flexDirection:"column"})},o.createElement(ce,{item:e,player:t,onGround:!0}));var n,i})))}function ue(e){var t=e.player,n=t.inventory;return n.length<=0?null:o.createElement("div",{style:Object(c.a)(Object(c.a)({},le),{},{zIndex:75,bottom:20,left:20})},o.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"stretch"}},n.map((function(e){return o.createElement("div",{style:{padding:10,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"}},e.image?o.createElement("img",{src:e.image,style:{cursor:"pointer",maxWidth:50,maxHeight:50}}):o.createElement("div",{style:{cursor:"pointer",backgroundColor:e.color,width:e.width,height:e.height}}),o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement(ce,{item:e,player:t,inInventory:!0})))}))))}var de=0,ye=0,he=function(){},fe=!1,ve={position:"absolute",zIndex:5,width:"100%",height:"100%",top:0,right:0,bottom:0,left:0};var pe=!1,me=!1,we=!1,ge=!1,xe=!1;document.addEventListener("keydown",(function(e){"m"!==e.key&&"M"!==e.key||(xe||(fe=!fe),xe=!0),"a"!==e.key&&"A"!==e.key&&"ArrowLeft"!==e.key||(pe=!0,we=!1),"d"!==e.key&&"D"!==e.key&&"ArrowRight"!==e.key||(we=!0,pe=!1),"w"!==e.key&&"W"!==e.key&&"ArrowUp"!==e.key||(me=!0,ge=!1),"s"!==e.key&&"S"!==e.key&&"ArrowDown"!==e.key||(ge=!0,me=!1)})),document.addEventListener("keyup",(function(e){"a"!==e.key&&"A"!==e.key&&"ArrowLeft"!==e.key||(pe=!1),"d"!==e.key&&"D"!==e.key&&"ArrowRight"!==e.key||(we=!1),"w"!==e.key&&"W"!==e.key&&"ArrowUp"!==e.key||(me=!1),"s"!==e.key&&"S"!==e.key&&"ArrowDown"!==e.key||(ge=!1),"m"!==e.key&&"M"!==e.key||(xe=!1)}));!function e(){var t,n,o;fe?(pe&&(de-=7),we&&(de+=7),me&&(ye-=7),ge&&(ye+=7)):(oe.velocity=oe.velocity||{x:0,y:0},pe&&oe.velocity.x>-2&&(oe.velocity.x-=.3,oe.imageTransform=void 0),we&&oe.velocity.x<2&&(oe.velocity.x+=.3,oe.imageTransform="scale(-1,1)"),me&&oe.velocity.y>-2&&(oe.velocity.y-=.3),ge&&oe.velocity.y<2&&(oe.velocity.y+=.3)),o=[oe],[].concat(Object(l.a)(o),Object(l.a)(p())).forEach((function(e,t){e.velocity.x&&(e.position.x+=e.velocity.x),e.velocity.y&&(e.position.y+=e.velocity.y)})),E(oe,N,!0),function(e){[].concat(Object(l.a)(e),Object(l.a)(p())).forEach((function(e){e.velocity&&(e.velocity.x&&(e.velocity.x*=.9,Math.abs(e.velocity.x)<.1&&(e.velocity.x=0)),e.velocity.y&&(e.velocity.y*=.9,Math.abs(e.velocity.y)<.1&&(e.velocity.y=0)))}))}([oe]);var i,r=null===(t=N.getCoord(T(oe.position)))||void 0===t||null===(n=t.info.items)||void 0===n?void 0:n.filter((function(e){return!e.hidden}));i=k(oe,[].concat(Object(l.a)(p()),Object(l.a)(r||[]))),re=i,fe||(de=oe.position.x,ye=oe.position.y),te(oe,N),he(),requestAnimationFrame((function(){return e()}))}();var Oe=function(){var e=i.a.useState(0),t=Object(s.a)(e,2)[1],n=i.a.useCallback((function(){t(Math.random())}),[t]);return i.a.useEffect((function(){he=n}),[n]),i.a.createElement("div",{className:"App",style:{overflow:"hidden"}},fe?i.a.createElement("div",{style:{zIndex:100,bottom:0,padding:20,position:"absolute",left:0,right:0}},i.a.createElement("div",{style:{color:"white"}},"Map"),i.a.createElement("button",{onClick:function(){ye-=100,n()}},"UP!"),i.a.createElement("button",{onClick:function(){ye+=100,n()}},"DOWN!"),i.a.createElement("button",{onClick:function(){de-=100,n()}},"LEFT!"),i.a.createElement("button",{onClick:function(){de+=100,n()}},"RIGHT!"),i.a.createElement("button",{onClick:function(){de=0,ye=0,n()}},"CENTER!")):null,i.a.createElement(ie,null),i.a.createElement("div",null,i.a.createElement("canvas",{id:"fog",width:window.innerWidth,height:window.innerHeight,style:Object(c.a)(Object(c.a)({},ve),{},{opacity:.2,filter:"blur(5px)"})}),i.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},N.tiles.map((function(e){return i.a.createElement(C,{overlayMode:fe,floor:N,tile:e,key:U(e.x,e.y)})})),p().map((function(e){return i.a.createElement(m,{item:e})})))),i.a.createElement(se,{player:oe}),i.a.createElement(ue,{player:oe}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.1c1c5b42.chunk.js.map