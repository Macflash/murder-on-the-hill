(this["webpackJsonpmureder-on-the-hill"]=this["webpackJsonpmureder-on-the-hill"]||[]).push([[0],{10:function(e,t,o){e.exports=o(17)},15:function(e,t,o){},16:function(e,t,o){},17:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=o(9),a=o.n(r),l=(o(15),o(6)),c=(o(16),o(7));function s(e,t){var o=e.x,n=e.y;switch(t){case"TOP":return{x:o,y:n-1};case"BOTTOM":return{x:o,y:n+1};case"RIGHT":return{x:o+1,y:n};case"LEFT":return{x:o-1,y:n}}}function d(e){return{x:Math.floor((e.x+150)/300),y:Math.floor((e.y+150)/300)}}var h=10,u=48,y=Math.max(window.innerWidth,window.innerHeight),f=Math.ceil(y/600);window.addEventListener("resize",(function(){y=Math.max(window.innerWidth,window.innerHeight),f=Math.ceil(y/600),console.log("Updated view dist",f)})),console.log("Initial view dist",f);var w=function(e){var t,o,n=e.tile,r=e.floor,a=e.overlayMode,l={x:n.x,y:n.y},c=d({x:A,y:G});return t=l,o=c,Math.max(Math.abs(t.x-o.x),Math.abs(t.y-o.y))>f?null:i.a.createElement("div",{style:{zIndex:a?10:4,position:"absolute",height:300,width:300,top:300*n.y+.5*(window.innerHeight-300)-G,left:300*n.x+.5*(window.innerWidth-300)-A,display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:a?void 0:"#663333"}},n.info.name,["TOP","RIGHT","BOTTOM","LEFT"].map((function(e){return i.a.createElement(T,{overlayMode:a,tile:n,floor:r,direction:e,hasDoor:n.doors.has(e),opened:n.hasNeighbor(r,e)})})))};function v(e,t){var o=0,n=0,i=0,r=0,a=t,l=t;switch(e){case"TOP":n="auto",a=void 0;break;case"BOTTOM":o="auto",a=void 0;break;case"RIGHT":i="auto",l=void 0;break;case"LEFT":r="auto",l=void 0}return{top:o,bottom:n,left:i,right:r,width:a,height:l}}var T=function(e){var t=e.direction,o=e.opened,n=e.hasDoor,r=e.tile,a=e.floor,l=e.overlayMode,d="TOP"==t||"BOTTOM"==t,y=i.a.createElement("div",{style:{flex:"auto",backgroundColor:"#322",height:d?"100%":void 0,width:d?void 0:"100%"}});return i.a.createElement("div",{style:Object(c.a)(Object(c.a)({},v(t,l?3:h)),{},{position:"absolute",display:"flex",flexDirection:d?"row":"column",justifyContent:"center",alignItems:"center",overflow:"hidden"})},y,n?i.a.createElement("div",{style:{cursor:o?void 0:"pointer",height:u,width:u,backgroundColor:o?"":"grey"},onClick:o?void 0:function(){a.fillCoord(s(r.coord,t)),S()}}):null,y)},g=o(4),m=o(5),p=o(1),k=function(){function e(t){Object(g.a)(this,e),this.info=t,this.x=0,this.y=0,this.initialDoors=void 0,this.rotation=0;var o=t.doors;this.initialDoors=new Set(o)}return Object(m.a)(e,[{key:"canPlace",value:function(e,t){var o=this,n=!0;return e.forEach((function(e){o.doors.has(e)||(n=!1)})),t.forEach((function(e){o.doors.has(e)&&(n=!1)})),n}},{key:"copy",value:function(t){var o=new e(this.info);return t?o.rotate(t):o.rotate(this.rotation),o}},{key:"rotate",value:function(e){return this.rotation=e%4,this}},{key:"hasNeighbor",value:function(e,t){return e.hasCoord(s(this.coord,t))}},{key:"coord",get:function(){return{x:this.x,y:this.y}}},{key:"doors",get:function(){var e=this,t=new Set;return this.initialDoors.forEach((function(o){t.add(function(e,t){var o=["TOP","RIGHT","BOTTOM","LEFT"],n=o.indexOf(e);return o[(n+t)%o.length]}(o,e.rotation))})),t}}]),e}(),x=new k({name:"Fourway",doors:["TOP","LEFT","RIGHT","BOTTOM"]}),O=new k({name:"TeeWay",doors:["TOP","LEFT","RIGHT"]}),b=new k({name:"Straight",doors:["TOP","BOTTOM"]}),E=new k({name:"LTurn",doors:["TOP","RIGHT"]}),M=new k({name:"RTurn",doors:["TOP","LEFT"]}),I=new k({name:"DeadEnd",doors:["TOP"]});function P(e){return[e,e.copy(1),e.copy(2),e.copy(3)]}function C(e){return[e,e.copy(1)]}var L=[].concat(Object(p.a)(C(x)),Object(p.a)(C(b)),Object(p.a)(P(O)),Object(p.a)(P(E)),Object(p.a)(P(M)),Object(p.a)(P(I)));function B(e,t){return"".concat(e,", ").concat(t)}var H=new(function(){function e(t){Object(g.a)(this,e),this.name=t,this.grid=new Map}return Object(m.a)(e,[{key:"getCoord",value:function(e){return this.getTile(e.x,e.y)}},{key:"getTile",value:function(e,t){return this.grid.get(B(e,t))}},{key:"hasCoord",value:function(e){return this.hasTile(e.x,e.y)}},{key:"hasTile",value:function(e,t){return this.grid.has(B(e,t))}},{key:"setCoord",value:function(e,t){this.setTile(e,t.x,t.y)}},{key:"setTile",value:function(e,t,o){if(this.hasTile(t,o))throw alert("Already had a tile there!"),"already had a tile!";e.x=t,e.y=o,this.grid.set(B(t,o),e)}},{key:"getValidSpotsForTiles",value:function(){}},{key:"fillCoord",value:function(e){this.fillTile(e.x,e.y)}},{key:"fillTile",value:function(e,t){var o=this,n=(["TOP","RIGHT","BOTTOM","LEFT"].map((function(n){return o.getCoord(s({x:e,y:t},n))})),new Set),i=new Set;["TOP","RIGHT","BOTTOM","LEFT"].forEach((function(r){var a=o.getCoord(s({x:e,y:t},r));a&&(a.doors.has(function(e){switch(e){case"TOP":return"BOTTOM";case"BOTTOM":return"TOP";case"RIGHT":return"LEFT";case"LEFT":return"RIGHT"}}(r))?n.add(r):i.add(r))})),console.log("fill tile needs these doors:",n,"and these walls:",i);var r=L.filter((function(e){return e.canPlace(n,i)}));if(console.log("These tiles could fit here!",r),!r)throw"wow we should really fix that!";var a=r[Math.floor(Math.random()*r.length)].copy();console.log("adding new tile!",a),this.setTile(a,e,t)}},{key:"tiles",get:function(){return Array.from(this.grid,(function(e){var t=Object(l.a)(e,2);t[0];return t[1]}))}}]),e}())("Main Floor");H.setTile(x.copy(),0,0);var R,j;function F(){if(!j){if(!(R=document.getElementById("fog")))return;if(R.width=window.innerWidth,R.height=window.innerHeight,!(j=R.getContext("2d")))return}j.clearRect(0,0,R.width,R.height),j.fillStyle="rgba(0,0,0,1)",j.fillRect(0,0,R.width,R.height),j.fillStyle="rgba(255,255,255,1)",j.beginPath(),j.arc(R.width/2,R.height/2,300,0,2*Math.PI),j.fill(),j.closePath()}window.addEventListener("resize",(function(){R.width=window.innerWidth,R.height=window.innerHeight,F()}));var A=0,G=0,S=function(){},D={position:{x:0,y:0},height:30,width:15};function W(){var e=.5*D.width,t=.5*D.height;return i.a.createElement("div",{style:{position:"absolute",zIndex:50,height:D.height,width:D.width,backgroundColor:"red",left:"calc(50% - ".concat(e,"px)"),right:"calc(50% + ".concat(e,"px)"),top:"calc(50% - ".concat(t,"px)"),bottom:"calc(50% + ".concat(t,"px)")}})}var z=!1,N=!1,U=!1,J=!1;document.addEventListener("keydown",(function(e){"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(z=!0,U=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(U=!0,z=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(N=!0,J=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||(J=!0,N=!1)})),document.addEventListener("keyup",(function(e){"a"!=e.key&&"A"!=e.key&&"ArrowLeft"!=e.key||(z=!1),"d"!=e.key&&"D"!=e.key&&"ArrowRight"!=e.key||(U=!1),"w"!=e.key&&"W"!=e.key&&"ArrowUp"!=e.key||(N=!1),"s"!=e.key&&"S"!=e.key&&"ArrowDown"!=e.key||(J=!1)}));!function e(){z&&(D.position.x-=2),U&&(D.position.x+=2),N&&(D.position.y-=2),J&&(D.position.y+=2),function(e,t){var o=.5*e.width,n=.5*e.height,i=.5*u,r=d(e.position),a=function(e,t){return{x:e.position.x-300*t.x,y:e.position.y-300*t.y}}(e,r),l=a.x,c=a.y,y=o+h-150,f=-1*y,w=n+h-150,v=-1*w,T=null===t||void 0===t?void 0:t.getCoord(r);function g(e,o){if(!(T&&T.doors.has(o)))return!1;var n=s(e,o);return(null===t||void 0===t?void 0:t.hasCoord(n))||null===t||void 0===t||t.fillCoord(n),!0}l<=y&&(Math.abs(c)>i||!g(r,"LEFT"))&&(e.position.x+=y-l),l>=f&&(Math.abs(c)>i||!g(r,"RIGHT"))&&(e.position.x+=f-l),c<=w&&(Math.abs(l)>i||!g(r,"TOP"))&&(e.position.y+=w-c),c>=v&&(Math.abs(l)>i||!g(r,"BOTTOM"))&&(e.position.y+=v-c)}(D,H),A=D.position.x,G=D.position.y,F(),S(),requestAnimationFrame((function(){return e()}))}();var q=function(){var e=i.a.useState(0),t=Object(l.a)(e,2)[1],o=i.a.useCallback((function(){t(Math.random())}),[t]);return i.a.useEffect((function(){S=o}),[o]),i.a.createElement("div",{className:"App",style:{overflow:"hidden"}},i.a.createElement(W,null),i.a.createElement("div",null,i.a.createElement("canvas",{id:"fog",width:window.innerWidth,height:window.innerHeight,style:{mixBlendMode:"multiply",position:"absolute",zIndex:5,width:"100%",height:"100%",top:0,right:0,bottom:0,left:0}}),i.a.createElement("div",{id:"gamefloor",style:{mixBlendMode:"normal"}},H.tiles.map((function(e){return i.a.createElement(w,{overlayMode:!1,floor:H,tile:e,key:B(e.x,e.y)})}))),i.a.createElement("div",{id:"mapoverlay",style:{mixBlendMode:"normal"}},H.tiles.map((function(e){return i.a.createElement(w,{overlayMode:!0,floor:H,tile:e,key:B(e.x,e.y)})})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.07c88ef0.chunk.js.map